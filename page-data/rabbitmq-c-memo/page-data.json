{"componentChunkName":"component---src-templates-post-js","path":"/rabbitmq-c-memo/","result":{"data":{"site":{"siteMetadata":{"title":"mojaie.github.io","siteUrl":"https://mojaie.github.io","author":{"name":"Seiji Matsuoka","summary":"Cheminformatics, Biointeraction and Laboratory automation"},"license":"CC BY 4.0","licenseURL":"https://creativecommons.org/licenses/by/4.0/legalcode","social":{"twitter":"mojaie"}}},"markdownRemark":{"id":"5290c556-f703-5b4e-a300-1158f87c24fa","excerpt":"環境 MacOS 10.15.5 Docker desktop 2.3.4.0 HomeBrew、CMakeがインストール済み(brew install cmake) HomeBrewのopensslの場所はoptディレクトリで指定する poptとopensslはオプション。不要なら対応するコンパイルオプションをOFF…","html":"<h3>環境</h3>\n<ul>\n<li>MacOS 10.15.5</li>\n<li>Docker desktop 2.3.4.0</li>\n<li>HomeBrew、CMakeがインストール済み(brew install cmake)</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">brew install popt\nbrew install openssl\n\ngit clone https://github.com/alanxz/rabbitmq-c.git\ncd rabbitmq-c\nmkdir build &amp;&amp; cd build\n\ncmake -DOPENSSL_ROOT_DIR=[ホームディレクトリ]/.homebrew/opt/openssl -DOPENSSL_INCLUDE_DIR=[ホームディレクトリ]/.homebrew/opt/openssl/include -DOPENSSL_LIBRARIES=[ホームディレクトリ]/.homebrew/opt/openssl/lib -DBUILD_TOOLS_DOCS=OFF -DBUILD_EXAMPLES=OFF -DBUILD_API_DOCS=OFF -DBUILD_TESTS=OFF ..\n\ncmake --build .</code></pre></div>\n<ul>\n<li>HomeBrewのopensslの場所はoptディレクトリで指定する</li>\n<li>poptとopensslはオプション。不要なら対応するコンパイルオプションをOFFにする</li>\n<li>\n<p>toolsをインストールするとtoolsフォルダに実行可能バイナリが生成される</p>\n<ul>\n<li>amqp-declare-queueコマンドでキューを作成</li>\n<li>amqp-publishでデータをキューに送る</li>\n<li>amqp-consumeでデータを取得する</li>\n<li>docker環境では問題なく動くが、MacOSではkubernetesにデプロイした時のみ上記コマンド使用時なぜか接続がロストする(調査中)、Pythonクライアントだと問題なく接続できる</li>\n</ul>\n</li>\n<li>基本的に同期接続（ログインとHeartbeat以外ほとんど）で、queueがfull時のtimeoutなどを設定してもあまり効果はない模様。非同期接続は他のクライアント(e.g. Pythonクライアントのpika)を使うか、自前で実装する必要がある。</li>\n</ul>","fields":{"slug":"/rabbitmq-c-memo/"},"frontmatter":{"title":"rabbitmq Cクライアントメモ","dateCreated":"August 05, 2020","dateModified":"August 05, 2020","tags":["C","rabbitmq"],"description":null}},"file":null},"pageContext":{"slug":"/rabbitmq-c-memo/","draft":false,"image":null,"previous":{"fields":{"slug":"/julia-tips/"},"frontmatter":{"title":"Juliaの開発Tips","image":null,"draft":false}},"next":{"fields":{"slug":"/ubuntu20-upgrade/"},"frontmatter":{"title":"SSHリモートでUbuntu20.04にアップグレードした際のメモ","image":null,"draft":false}}}},"staticQueryHashes":["2841359383","3266777773","401191528"]}