{"componentChunkName":"component---src-templates-post-js","path":"/julia-package-action/","result":{"data":{"site":{"siteMetadata":{"title":"mojaie.github.io","siteUrl":"https://mojaie.github.io","author":{"name":"Seiji Matsuoka","summary":"Cheminformatics, Biointeraction and Laboratory automation"},"license":"CC BY 4.0","licenseURL":"https://creativecommons.org/licenses/by/4.0/legalcode","social":{"twitter":"mojaie"}}},"markdownRemark":{"id":"bb552abd-5076-5e56-8275-e3280e79a448","excerpt":"2021年1月時点で、Travis等を使用する従来のCIワークフローからGitHub Actionへの移行が徐々に進んでいます。MassInstallActionというパッケージを使うと複数のライブラリのCIワークフローを自動的にGitHub Actionへ移行することができます。 MassInstallAction…","html":"<p>2021年1月時点で、Travis等を使用する従来のCIワークフローからGitHub Actionへの移行が徐々に進んでいます。MassInstallActionというパッケージを使うと複数のライブラリのCIワークフローを自動的にGitHub Actionへ移行することができます。</p>\n<h3>MassInstallActionのインストール</h3>\n<p>以下、REPLでの操作です。GitHubやHTTPパッケージがなければインストールしておきます。</p>\n<div class=\"gatsby-highlight\" data-language=\"julia\"><pre class=\"language-julia\"><code class=\"language-julia\"><span class=\"token punctuation\">(</span>@v1<span class=\"token punctuation\">.</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span> pkg<span class=\"token operator\">></span> add MassInstallAction\n<span class=\"token punctuation\">(</span>@v1<span class=\"token punctuation\">.</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span> pkg<span class=\"token operator\">></span> add GitHub\n<span class=\"token punctuation\">(</span>@v1<span class=\"token punctuation\">.</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span> pkg<span class=\"token operator\">></span> add HTTP</code></pre></div>\n<h3>MassInstallActionの実行</h3>\n<p>プロジェクトフォルダに移動してREPLを起動し、activateします。\nGitHubでアクセストークンを生成しておきます。Settings->Developer settings->Personal access tokens->Generate new tokenでトークンを生成してコピーし、REPLで下記コードを実行します。MassInstallActionを適用したいリポジトリをrsに配列で格納します。</p>\n<div class=\"gatsby-highlight\" data-language=\"julia\"><pre class=\"language-julia\"><code class=\"language-julia\">julia<span class=\"token operator\">></span> <span class=\"token keyword\">using</span> GitHub<span class=\"token punctuation\">,</span> MassInstallAction\njulia<span class=\"token operator\">></span> <span class=\"token keyword\">import</span> HTTP\njulia<span class=\"token operator\">></span> auth <span class=\"token operator\">=</span> authenticate<span class=\"token punctuation\">(</span><span class=\"token string\">\"GitHubのアクセストークン\"</span><span class=\"token punctuation\">)</span>\njulia<span class=\"token operator\">></span> rs <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>repo<span class=\"token punctuation\">(</span>Repo<span class=\"token punctuation\">(</span><span class=\"token string\">\"mojaie/MolecularGraph.jl\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> auth<span class=\"token operator\">=</span>auth<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span></code></pre></div>\n<p>下記リンクのMassInstallActionデモコードから必要なものを実行します。<br>\n<a href=\"https://github.com/julia-actions/MassInstallAction.jl/blob/dec8ce995d707b0008c0b1e47f93f7bcbad2d877/demos/MaintenanceDec2020/maintenance.jl\">https://github.com/julia-actions/MassInstallAction.jl/blob/dec8ce995d707b0008c0b1e47f93f7bcbad2d877/demos/MaintenanceDec2020/maintenance.jl</a></p>\n<ul>\n<li>\n<p>Key/secret creation</p>\n<p>Documenter.jlのデプロイに必要なDOCUMENTER_KEYとdeploy keyを生成してGitHubに登録します(すでにキーがある場合はスキップします)。TagBotもこれらを使用するのでDocumenterを使っていなくても生成されます。</p>\n</li>\n</ul>\n<p>以下は、デモコードを実行するとプロジェクトの.github/workflowsに当該ワークフローのyamlファイルを追加したプルリクエストが自動的に作成されます。</p>\n<ul>\n<li>\n<p>TagBot</p>\n<p>以前は1時間おきにbotが巡回して新しいバージョンのタグのチェックをするワークフローでしたが、レジストリに登録された際にトリガーされて自動的に新しいバージョンのタグが付与されるようになりました。</p>\n</li>\n<li>\n<p>Documenter</p>\n<p>masterブランチへのpush時に自動的にDocumenterがデプロイされてドキュメントが自動生成されるワークフローを作成します。</p>\n</li>\n<li>\n<p>CI</p>\n<p>プロジェクトにtravis.yamlがある場合はその情報を元にGitHub Actionでユニットテストを実行するワークフローを作成します。</p>\n</li>\n</ul>\n<h3>謝辞</h3>\n<p>Tim Holy氏にGitHubのissueにて御指南いただきました。ありがとうございました。\n<a href=\"https://github.com/mojaie/MolecularGraph.jl/issues/51\">https://github.com/mojaie/MolecularGraph.jl/issues/51</a></p>","fields":{"slug":"/julia-package-action/"},"frontmatter":{"title":"MassInstallActionでJuliaパッケージのCI環境を整備する","dateCreated":"January 31, 2020","dateModified":"January 31, 2021","tags":["Julia","package manager","package development"],"description":null}},"file":null},"pageContext":{"slug":"/julia-package-action/","draft":false,"image":null,"previous":{"fields":{"slug":"/cud_named_color/"},"frontmatter":{"title":"CUD推奨配色セット近傍のHTML色名(X11 colors)","image":null,"draft":false}},"next":{"fields":{"slug":"/julia-package-admin/"},"frontmatter":{"title":"Juliaパッケージ管理メモ","image":null,"draft":false}}}},"staticQueryHashes":["2841359383","3266777773","401191528"]}